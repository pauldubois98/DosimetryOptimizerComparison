\documentclass[a4paper]{article}
\usepackage{amsmath}
\usepackage{amssymb}

%opening
\title{Radiotherapy Dosimetry: A Review on Open-Source Optimizer}
\author{Paul Dubois}

\newcommand{\abs}[1]{|{#1}|}
\newcommand{\R}{\mathbb{R}}

\begin{document}
	
	\maketitle
	
	\begin{abstract}
		Radiotherapy dosimetry plays a crucial role in optimizing treatment plans for cancer patients.
		In this study, we investigate the performance of a dozen standard state-of-the-art open-source optimizers for radiotherapy dosimetry.
		Our evaluation includes the use of TGG119 benchmark cases as well as one real case obtained from the Institute du Cancer de Montpellier (ICM).
		Among the tested optimizers, Newton CG demonstrates the fastest convergence in terms of the number of iterations.
		However, when considering the computation time per iteration, LBFGS emerges as the most efficient optimizer.
		These findings shed light on the performance of open-source optimizers for radiotherapy dosimetry, aiding practitioners in selecting suitable optimization tools for efficient treatment planning.
	\end{abstract}
	
	\section{Introduction}
	Radiotherapy, a widely utilized intervention for cancer treatment, employs ionizing radiation to eliminate malignant cells.
	Intensity-modulated radiation therapy (IMRT) has emerged as a notable technique within radiotherapy, aiming to deliver high radiation doses to tumors while minimizing exposure to healthy surrounding tissues.
	Traditional IMRT strategies typically employ a set number of beams, often 5, 7, or 9, originating from various angles around the patient, commonly distributed evenly.
	Each beam's intensity is modulated to optimize the delivery of radiation doses to the tumor while reducing exposure to healthy tissues.
	This approach surpasses the effectiveness of the 3D-conformal radiotherapy (3D-CRT) technique.
	To facilitate precise and efficient radiation delivery, a computer-controlled device called the multi-leaf collimator (MLC) is utilized to shape the radiation beam according to the contours of the tumor.
	
	The effectiveness of a radiotherapy treatment plan relies on the optimization procedure, which involves a series of steps aimed at ensuring the optimal delivery of radiation in accordance with the prescribed guidelines of medical practitioners.
	Typically, computer software is employed to facilitate the optimization process, taking into account various factors such as patient anatomy, the size and location of the tumor and organs, and the radiation objectives defined by medical professionals.
	
	\paragraph{Pre-dose-optimization}
	The initial stage of the optimization process entails the creation of a virtual representation of the patient's anatomical structure using advanced medical imaging modalities, such as computed tomography (CT) or magnetic resonance imaging (MRI) scans.
	This model is subsequently utilized to accurately determine the size and location of the tumor, as well as to delineate the surrounding healthy tissues that necessitate protection from radiation exposure.
	Following this, the radiation dose required for effective treatment is established, typically based on dose-volume objectives defined by physicians (e.g., ensuring that 95\% of the planning target volume receives a minimum dose of 75 Gy).
	Determining the appropriate dose takes into consideration factors such as tumor characteristics, location, size, as well as the patient's medical history and overall health status.
	These essential steps in the optimization process are carried out by medical professionals with expertise in radiotherapy treatment planning.
	
	\paragraph{Radiotherapy doses}
	The subsequent step entails the computation of the radiation dose distribution within the patient's volumetric anatomy.
	This is achieved by simulating a particular configuration of the multi-leaf collimator (MLC) on the patient's body, utilizing the available medical imaging data.
	The resulting computed dose represents a mapping from the three-dimensional volume of the patient's anatomy to a scalar value measured in Grays (Gy), which denotes the absorbed radiation energy.
	In practical implementation, a discrete representation of the dose distribution is utilized, wherein the dose is calculated for each individual voxel comprising the patient's anatomical structure.
	
	\paragraph{Dose-Volume Histograms}
	Medical professionals have meticulously identified and delineated the pertinent anatomical structures within the patient's anatomy.
	This allows the computation of dose-volume histograms (DVHs) for each structure, predicated on a specified dose distribution.
	The dose-volume objectives are subsequently represented as specific points on the DVH curve, which correspond to the desired minimum or maximum dose constraints.
	These objectives delineate the desired thresholds that should be upheld, with points on the DVH curve either located above (for minimum dose constraints) or below (for maximum dose constraints) the prescribed thresholds.
	
	\paragraph{Dose Evaluation}
	Physicians employ multiple criteria to assess the quality of a radiation dose administered during treatment.
	Initially, they scrutinize the three-dimensional distribution of the dose across the patient's anatomy, focusing on the spatial allocation among different anatomical structures, as well as identifying the presence, number, and locations of regions with excessive radiation (referred to as "hot spots").
	Subsequently, physicians conduct a thorough analysis of the dose-volume histograms (DVHs) to evaluate the degree of compliance with predefined DVH objectives. This crucial evaluation step aims to safeguard the adjacent healthy tissues from unnecessary radiation exposure.
	By optimizing the treatment plan and meticulously assessing the quality of the dose distribution, physicians strive to ensure the attainment of the most favorable outcome for the patient.
	
	
	
	\section{Methods}
	To ensure the precision and effectiveness of radiation therapy, a robust dose optimization process are essential.
	
	\subsection{Radiotherapy Dosimetry}
	Radiotherapy dose optimization can be conceptualized as an inverse problem, whereby the objective is to determine the most suitable radiation dose distribution that aligns with the desired treatment outcome.
	In other terms, the challenge lies in identifying the radiation intensity or fluence maps that deliver the prescribed dose to the tumor while minimizing exposure to healthy tissues.
	
	Mathematical optimization algorithms are employed to address the inverse problem of radiotherapy dose optimization.
	These algorithms aim to identify the optimal solution by minimizing a predefined objective function that encompasses treatment goals and constraints.
	Typically, the objective function includes terms that penalize both underdosing and overdosing of the tumor and overdosing of surrounding healthy tissues.
	It may also incorporate terms that account for the complexity or deliverability of the treatment plan.
	
	Efficiently solving this optimization problem often involves designing the objective function to be convex, thereby providing a well-defined target for the optimization process.
	Gradient-based methods, Newtonian algorithms, or quasi-Newtonian algorithms are commonly employed for this purpose.
	We aim at benchmarking state-of-the-art open-source optimization algorithms for the specific task of radiotherapy dosimetry.
	
	\subsection{Data}
	In this research endeavor, our focus was to evaluate the various open-source optimizers. 
	We used the widely recognized TG-119 cases as a benchmark for evaluating radiation therapy plans optimization.
	The TG-119 dataset provides specific dose goals, which we incorporated into our proposed cost function.
	
	\subsection{Objective function}
	The cost function is formulated as a weighted sum of multiple objectives, with each objective corresponding to a specific dose goal. The formulation is as follows:
	
	\[f(\mathbf{d}) = \sum_{o \in \mathcal{O}} w_o f_o(\mathbf{d})\]
	
	where:
	\begin{itemize}
		\item \(\mathbf{d}\) represents the dose distribution at the voxel level, and \(\mathbf{d}[s]\) denotes the dose on voxels within the structure \(s\)
		\item \(\mathcal{O}\) denotes the set of objectives corresponding to dose volume goals
		\item \(w_o\) signifies the weight assigned to the objective \(o \in \mathcal{O}\)
		\item \(o_s\), \(o_d\), and \(o_v\) refer to the structure, dose, and volume goals of the objective \(o \in \mathcal{O}\)
	\end{itemize}
	
	The objective function \(f_o(\mathbf{d})\) is computed based on the specific type of dose volume constraint:
	If \(o\) represents a maximum dose volume constraint, \(f_o(\mathbf{d})\) is calculated as \(\sum_{d \in \mathbf{d}[o_s]}(d - o_d)_+^2\); if \(o\) represents a minimum dose volume constraint, then \(f_o(\mathbf{d})\) is calculated as \(\sum_{d \in \mathbf{d}[o_s]}(o_d - d)_+^2\).
	The formulation involves a squared over/under-dose penalty function.
	
	In addition to the above, we introduced a regularization term that penalizes variations in bixel values between neighboring regions, also employing a squared penalty.
	
	The optimization process involves finding the optimal bixel values (\(\mathbf{b}\)) by solving \(\mathbf{d} = \mathbf{L}\mathbf{b}\), where \(\mathbf{L}\) is a precomputed dose-influence matrix mapping bixels to voxels.
	Notably, since negative energy rays are physically infeasible, we ensured that each bixel value is non-negative (\(b \geq 0 \quad \forall b \in \mathbf{b}\)).
	To achieve this, we computed \(\mathbf{d} = \mathbf{L}\abs{\mathbf{b}}\), where \(\abs{\mathbf{b}}\) denotes the element-wise absolute value of \(\mathbf{b}\).
	
	
	
	\subsection{Open-source Optimizers}
	
	\section{Results}
	
	\section{Discussion}
	
	
	\bibliographystyle{plain}
	\bibliography{refs}
\end{document}
